package ro.helator.ie.camel.templates;

import java.util.List;
import java.util.Map;
import java.util.Properties;

public class IE_Camel_RouteTemplate {

	private String name;
	private Properties mainProp;
	private Map<String, Subtype> subtypes;

	public IE_Camel_RouteTemplate(String template) {
		this.name = template;
		mainProp = TemplatesUtil.getMainProperties(this.name);

		List<String> subtypeList = TemplatesUtil.getSubfolders(this.name);
		if (subtypeList != null) {
			subtypeList.forEach(s -> {
				subtypes.put(s, new Subtype(this.name, s));
			});
		}
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public Properties getMainProp() {
		return mainProp;
	}

	public void setMainProp(Properties mainProp) {
		this.mainProp = mainProp;
	}

	public Map<String, Subtype> getSubtypes() {
		return subtypes;
	}

	public void setSubtypes(Map<String, Subtype> subtypes) {
		this.subtypes = subtypes;
	}

	private class Subtype {

		private String parent;
		private String name;
		private Properties tokenProp;

		protected Subtype(String parent, String name) {
			this.parent = parent;
			this.name = name;

			this.tokenProp = TemplatesUtil.getSubtypeProperties(this.parent, this.name);
		}

		public String getParent() {
			return parent;
		}

		public void setParent(String parent) {
			this.parent = parent;
		}

		public String getName() {
			return name;
		}

		public void setName(String name) {
			this.name = name;
		}

		public Properties getTokenProp() {
			return tokenProp;
		}

		public void setTokenProp(Properties tokenProp) {
			this.tokenProp = tokenProp;
		}

	}

}
