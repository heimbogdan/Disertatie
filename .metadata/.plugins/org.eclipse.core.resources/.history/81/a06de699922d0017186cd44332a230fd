package ro.helator.ie.camel.deploy;

import org.apache.camel.builder.RouteBuilder;

import ro.helator.ie.camel.implementations.RouteFactoryBeanImpl;
import ro.helator.ie.camel.interfaces.RouteFactoryBean;

public class IE_CamelFileListener extends RouteBuilder {

	@Override
	public void configure() throws Exception {

		from("file://integrationEngine/camel/routes?"
				+ "delay=10000"
				+ "&recursive=true"
				+ "&noop=true"
				+ "&idempotentKey=${file:name}-${file:modified}")
		.routeId("IE_Camel File Listener")
		.log("Reading file [${file:name}]")
		.bean(new RouteFactoryBeanImpl(), "buildRoute(${file:name},${body})");	
	}

}
