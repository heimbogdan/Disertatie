package ro.helator.dia.screen.controller.tab;

import java.io.File;
import java.io.FileReader;
import java.net.URL;
import java.util.ResourceBundle;

import org.springframework.stereotype.Component;

import com.google.gson.Gson;
import com.google.gson.JsonParser;
import com.google.gson.stream.JsonReader;

import javafx.fxml.FXML;
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import ro.helator.dia.screen.BaseScreenController;

import static ro.helator.dia.util.Constants.*;
@Component
public class PreferencesController extends BaseScreenController{

	@FXML
	private TreeView<String> preferencesTree;
	
	@Override
	public void initialize(URL arg0, ResourceBundle arg1) {
		System.out.println("test");
		
		File preferences = new File(PREFERENCES_FOLDER);
		if(preferences.isDirectory()){
			String[] list = preferences.list();
			JsonParser parser = new JsonParser();
			for(String file : list){
				File f = new File(file);
				if(f.isFile()){
					
					parser.parse(new FileReader(f));
				}
			}
		}
		TreeItem<String> preferences = new TreeItem<String>("Preferences");
		preferences.setExpanded(true);
		
		TreeItem<String> general = new TreeItem<String>("General");
		general.setExpanded(true);
		
		TreeItem<String> language = new TreeItem<String>("Language");
		TreeItem<String> fonts = new TreeItem<String>("Fonts");
		
		general.getChildren().add(language);
		general.getChildren().add(fonts);
		
		preferences.getChildren().add(general);
		preferencesTree.setRoot(preferences);
	}

}
